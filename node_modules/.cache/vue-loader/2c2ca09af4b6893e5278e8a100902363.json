{"remainingRequest":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anttu/Documents/Git/Vue_NodeNote/src/components/SideBar.vue?vue&type=style&index=0&id=3eca7188&scoped=true&lang=css&","dependencies":[{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/src/components/SideBar.vue","mtime":1549631267606},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/vuetify-loader/lib/loader.js","mtime":499162500000},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anttu/Documents/Git/Vue_NodeNote/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.iconBtn {\n  padding: 15px;\n}\n.shareBtn:hover {\n  color: rgb(63, 173, 91);\n  transition: 0.5s;\n}\n.deleteBtn:hover {\n  color: rgb(187, 67, 63);\n  transition: 0.5s;\n}\n.listName:hover {\n  color: rgb(240, 202, 77);\n  transition: 0.5s;\n}\n.activeList:active {\n  color: rgb(240, 202, 77);\n}\n.listElement {\n  padding: 0;\n  padding-left: 0;\n  align-content: left;\n  margin: 0;\n  color: #f4f4f4;\n}\n.signOutBtn {\n  color: #f4f4f4;\n  font-weight: bold;\n  position: fixed;\n  bottom: 0px;\n  text-align: left !important;\n  background-color: #ff6961;\n  width: 300px;\n  display: block;\n  padding-left: 30px;\n}\n.signOutBtn:hover {\n  opacity: 0.8;\n  transition: 0.5s;\n}\n.loggedInUser {\n  padding: 0;\n  padding-left: 30px;\n  margin-bottom: 10px;\n  color: #f4f4f4b2;\n  font-size: 16px;\n}\n",{"version":3,"sources":["SideBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SideBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <DeleteDialog ref=\"delete\"/>\n    <ShareDialog ref=\"share\" v-on:agree-share=\"shareList\"/>\n    <Slide right>\n      <div class=\"loggedInUser\">{{curUser.email}}</div>\n      <div v-bind:key=\"list.id\" v-for=\"list in userLists\">\n        <div class=\"listElement\" href=\"#\">\n          <span class=\"iconBtn shareBtn\" @click=\"openShareDialog(list)\">\n            <font-awesome-icon icon=\"share\"/>\n          </span>\n          <span class=\"listName\" @click=\"openList(list)\">{{list.Name}}</span>\n          <span v-bind:list=\"list\" class=\"iconBtn deleteBtn\" @click=\"openDeleteDialog(list)\">\n            <font-awesome-icon icon=\"trash\"/>\n          </span>\n        </div>\n      </div>\n      <button @click=\"signOut\" class=\"signOutBtn\">\n        <font-awesome-icon icon=\"sign-out-alt\"/>&nbsp; Sign out\n      </button>\n    </Slide>\n  </div>\n</template>\n\n<script>\nimport Slide from \"./SideMenu/slide\";\nimport DeleteDialog from \"./dialogs/DeleteDialog\";\nimport ShareDialog from \"./dialogs/ShareDialog\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nconst db = require(\"../../api-server/db/dbController\");\n\nexport default {\n  data() {\n    return {\n      items: [],\n      userLists: [],\n      listIdToShare: null,\n      curUser: firebase.auth().currentUser,\n      currentList: JSON.parse(localStorage.getItem(\"curList\"))\n    };\n  },\n  components: {\n    Slide,\n    DeleteDialog,\n    ShareDialog\n  },\n  methods: {\n    openDeleteDialog(list) {\n      this.$root.$delete\n        .open(\n          \"List removal\",\n          'Are you sure you want to delete the list \"' + list.Name + '\"?',\n          {\n            color: \"gray\"\n          }\n        )\n        .then(value => {\n          if (value) {\n            db.deleteList(list.List_id).then(() => {\n              if (\n                list.List_id ===\n                JSON.parse(localStorage.getItem(\"curList\")).List_id\n              ) {\n                if (this.userLists.length === 1)\n                  localStorage.removeItem(\"curList\");\n                else\n                  localStorage.setItem(\n                    \"curList\",\n                    JSON.stringify(this.userLists[0])\n                  );\n              }\n              this.getUserLists();\n            });\n          }\n        });\n    },\n    openShareDialog(list) {\n      this.listIdToShare = list.List_id;\n      this.$root.$share.open(\n        \"List sharing\",\n        'Who do you want to share the list \"' + list.Name + '\" with?',\n        {\n          color: \"gray\"\n        }\n      );\n    },\n    openList(list) {\n      this.currentList = list;\n      this.loadItems(this.currentList.List_id);\n    },\n    openListByName(listName) {\n      db.getListIdByName(listName, this.curUser.uid).then(res => {\n        // return (this.currentList = this.userLists.find(\n        //   list => list.List_id === res.data[0][\"List_id\"]\n        // ));\n      });\n    },\n    signOut() {\n      firebase\n        .auth()\n        .signOut()\n        .then(() => {\n          this.$router.replace(\"login\");\n        });\n      localStorage.removeItem(\"curList\");\n    },\n    getUserLists() {\n      db.getListsOfUser(this.curUser.uid).then(res => {\n        this.userLists = res.data;\n        if (this.userLists.length != 0) {\n          if (localStorage.getItem(\"curList\") === null) {\n            this.currentList = this.userLists[0];\n          } else this.currentList = JSON.parse(localStorage.getItem(\"curList\"));\n          this.loadItems(this.currentList.List_id);\n          this.openListByName(this.currentList.Name);\n        }\n      });\n    },\n    // Used from Header, that gets the list name from AddListDialog\n    addList(listName) {\n      db.addList(this.curUser.uid, listName).then(() => {\n        this.getUserLists();\n        console.log(this.userLists);\n      }).then(() => {\n        console.log(res)\n      });\n    },\n    addItem(newItem) {\n      if (this.currentList.List_id) {\n        db.addItem(this.currentList.List_id, newItem.Name).then(() => {\n          this.loadItems(this.currentList.List_id);\n        });\n      }\n    },\n    loadItems(listId) {\n      db.getItems(listId)\n        .then(value => {\n          this.items.push(value.data);\n        })\n        .then(() => {\n          this.$emit(\"cur-list\", this.currentList);\n          this.$emit(\"items-list\", this.items[0]);\n          this.items = [];\n        });\n    },\n    deleteItem(listId, itemId, itemName) {\n      if (listId && itemId && itemName) db.deleteItem(listId, itemId, itemName);\n    },\n    shareList(email) {\n      if (this.$refs.share.alertEmail(email)) {\n        db.checkUserExists(email).then(result => {\n          result = result.data[0][\"COUNT(*)\"];\n          if (result === 1) {\n            db.shareList(email, this.listIdToShare);\n            this.$refs.share.resolve(true);\n            this.$refs.share.dialog = false;\n          } else this.$refs.share.alertShare(email);\n        });\n      }\n    }\n  },\n  mounted() {\n    this.getUserLists();\n    this.$root.$delete = this.$refs.delete;\n    this.$root.$share = this.$refs.share;\n  }\n};\n</script>\n\n<style scoped>\n.iconBtn {\n  padding: 15px;\n}\n.shareBtn:hover {\n  color: rgb(63, 173, 91);\n  transition: 0.5s;\n}\n.deleteBtn:hover {\n  color: rgb(187, 67, 63);\n  transition: 0.5s;\n}\n.listName:hover {\n  color: rgb(240, 202, 77);\n  transition: 0.5s;\n}\n.activeList:active {\n  color: rgb(240, 202, 77);\n}\n.listElement {\n  padding: 0;\n  padding-left: 0;\n  align-content: left;\n  margin: 0;\n  color: #f4f4f4;\n}\n.signOutBtn {\n  color: #f4f4f4;\n  font-weight: bold;\n  position: fixed;\n  bottom: 0px;\n  text-align: left !important;\n  background-color: #ff6961;\n  width: 300px;\n  display: block;\n  padding-left: 30px;\n}\n.signOutBtn:hover {\n  opacity: 0.8;\n  transition: 0.5s;\n}\n.loggedInUser {\n  padding: 0;\n  padding-left: 30px;\n  margin-bottom: 10px;\n  color: #f4f4f4b2;\n  font-size: 16px;\n}\n</style>\n"]}]}